import{r as a,o as r,c as i,a as e,b as o,F as l,e as s,d as t}from"./app.9fd500a2.js";import{_ as c}from"./plugin-vue_export-helper.21dcd24c.js";const p={},d=e("h1",{id:"contributing-to-nineanimator",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#contributing-to-nineanimator","aria-hidden":"true"},"#"),s(" Contributing to NineAnimator")],-1),h=e("p",null,"First and foremost, thank you for taking the time to read this document. We are a community of developers and anime lovers, and we need people like you to help in the development of this project.",-1),u=s("If you haven't joined our "),m={href:"https://discord.gg/dzTVzeW",target:"_blank",rel:"noopener noreferrer"},_=s("Discord server"),f=s(" already, feel free to come and find us "),g={href:"https://discord.gg/dzTVzeW",target:"_blank",rel:"noopener noreferrer"},y=s("there"),b=s(". You'll get faster responses from our community members and contributors."),D=t('<p>In this document, you&#39;ll find a set of guidelines for contributing and some resources for getting familiar with NineAnimator&#39;s code.</p><h3 id="table-of-contents" tabindex="-1"><a class="header-anchor" href="#table-of-contents" aria-hidden="true">#</a> Table of Contents</h3><ul><li><a href="#i-just-have-a-question">I just have a question</a></li><li><a href="#how-can-i-contribute">How can I contribute?</a></li><li><a href="#what-should-i-know-before-i-get-started">What should I know before I get started?</a><ul><li><a href="#model-view-controller">Model View Controller</a></li><li><a href="#asynchronous">Asynchronous</a></li></ul></li><li><a href="#styleguides">Styleguides</a><ul><li><a href="#git-commits">Git Commits</a></li><li><a href="#swift-styleguide">Swift Styleguide</a></li></ul></li><li><a href="#contributing-assets">Contributing Assets</a></li></ul><h3 id="i-just-have-a-question" tabindex="-1"><a class="header-anchor" href="#i-just-have-a-question" aria-hidden="true">#</a> I just have a question</h3>',4),w=s("For faster responses, use our "),C={href:"https://discord.gg/dzTVzeW",target:"_blank",rel:"noopener noreferrer"},v=s("Discord server"),k=s(" for questions."),A=e("ul",null,[e("li",null,[s("Chances are your question has been answered by one of our moderators. Make sure to check the "),e("code",null,"#faq"),s(" channel and the pinned messages in the "),e("code",null,"#general"),s(" and "),e("code",null,"#app-support"),s(" channels.")]),e("li",null,[s("If you can't find what you're looking for, post your inquiry in the "),e("code",null,"#app-support"),s(" channel.")])],-1),N=s("Optionally, you can also use our "),S={href:"https://reddit.com/r/NineAnimator",target:"_blank",rel:"noopener noreferrer"},x=s("r/NineAnimator"),M=s(" subreddit."),I=e("h3",{id:"how-can-i-contribute",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#how-can-i-contribute","aria-hidden":"true"},"#"),s(" How can I contribute?")],-1),T=e("strong",null,"Report Bugs",-1),P=s(": Use the "),U={href:"https://github.com/SuperMarcus/NineAnimator/issues/new/choose",target:"_blank",rel:"noopener noreferrer"},V=s("issue tracker"),E=s(" with the "),q=e("code",null,"Bug Report",-1),B=s(" template to report a bug."),L=e("strong",null,"Suggesting Enhancements",-1),F=s(": Use the "),R={href:"https://github.com/SuperMarcus/NineAnimator/issues/new/choose",target:"_blank",rel:"noopener noreferrer"},W=s("issue tracker"),z=s(" with the "),O=e("code",null,"Feature Request",-1),j=s(" template to suggest an enhancement."),H=e("strong",null,"Help Translating the App",-1),G=s(": Use our "),Y={href:"https://translate.9ani.app",target:"_blank",rel:"noopener noreferrer"},X=s("Crowdin site"),J=s(" at "),K={href:"https://translate.9ani.app",target:"_blank",rel:"noopener noreferrer"},Q=s("https://translate.9ani.app"),Z=s(" to help translate NineAnimator into different languages."),$=e("li",null,[e("strong",null,"Code Contribution"),s(": Whether you implemented a new anime source or fixed a bug, feel free to open a pull request from your fork. Make sure you read the "),e("a",{href:"#styleguides"},"styleguides"),s(" section.")],-1),ee=e("li",null,[e("strong",null,"Assets & Designs"),s(": Creating a new app icon for NineAnimator? Have suggestions on the designs? See the "),e("a",{href:"#contributing-assets"},"Contributing Assets"),s(" section.")],-1),se=s("Feel free to talk to us on our "),ne={href:"https://discord.gg/dzTVzeW",target:"_blank",rel:"noopener noreferrer"},oe=s("Discord server"),te=s(" before contributing."),ae=e("h3",{id:"what-should-i-know-before-i-get-started",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#what-should-i-know-before-i-get-started","aria-hidden":"true"},"#"),s(" What should I know before I get started?")],-1),re=e("h4",{id:"model-view-controller",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#model-view-controller","aria-hidden":"true"},"#"),s(" Model View Controller")],-1),ie=e("p",null,"NineAnimator is a typical Cocoa Touch iOS application following the Model-View-Controller (MVC) design pattern. There are many resources online for you to learn the MVC design, but in short, you should know the responsibility of each component and keep the additional code at where it should be.",-1),le=e("strong",null,"Model",-1),ce=s(": NineAnimator, at its core, is a collection of parsers and analyzers. The "),pe={href:"https://github.com/SuperMarcus/NineAnimator/tree/master/Modules/Sources",target:"_blank",rel:"noopener noreferrer"},de=e("code",null,"Modules/Sources",-1),he=s(" directory hosts all of the parsing logic and user-configurable."),ue=e("strong",null,"Anime Source",-1),me=s(": Under the "),_e=e("code",null,"Modules/Sources",-1),fe=s(" folder, you'll find the "),ge={href:"https://github.com/SuperMarcus/NineAnimator/tree/master/Modules/Sources/NineAnimatorNativeSources",target:"_blank",rel:"noopener noreferrer"},ye=e("code",null,"NineAnimatorNativeSources",-1),be=s(". Code under this folder fetches data from different source anime websites, decodes it, and present the information to other components of NineAnimator. For each source website, NineAnimator creates a distinct "),De=e("code",null,"Source",-1),we=s(" class. "),Ce=e("code",null,"Source",-1),ve=s(" encapsulates the functionalities and capabilities of the anime website."),ke=e("strong",null,"Media Parser",-1),Ae=s(": Media Parsers, located under the "),Ne={href:"https://github.com/SuperMarcus/NineAnimator/tree/master/Modules/Sources/NineAnimatorNativeParsers",target:"_blank",rel:"noopener noreferrer"},Se=e("code",null,"NineAnimatorNativeParsers",-1),xe=s(" folder under "),Me=e("code",null,"Modules/Sources",-1),Ie=s(", are classes that accept a URL to a streaming site and return a locally streamable URL. Media Parsers are used to support playbacks with native players (and cast). NineAnimator parsers will conform to the "),Te=e("code",null,"VideoProviderParser",-1),Pe=s(" protocol."),Ue=e("strong",null,"Anime Listing Service",-1),Ve=s(": The list services are third-party tracking and information services implemented under the "),Ee={href:"https://github.com/SuperMarcus/NineAnimator/tree/master/Modules/Sources/NineAnimatorNativeListServices",target:"_blank",rel:"noopener noreferrer"},qe=e("code",null,"NineAnimatorNativeListServices",-1),Be=s(" folder under "),Le=e("code",null,"Modules/Sources",-1),Fe=s(". List services conform to the "),Re=e("code",null,"ListingService",-1),We=s(" protocol and declare their capabilities through the "),ze=e("code",null,"var isCapableOf<capability>: Bool",-1),Oe=s(" getters. List services also provide the matching "),je=e("code",null,"ListingAnimeReference",-1),He=s(" for each "),Ge=e("code",null,"AnimeLink",-1),Ye=s("."),Xe=t('<p><strong>View</strong>: The views define the look and feel of the UI components. NineAnimator employs several mechanisms to construct and configure the UI. In general, NineAnimator&#39;s design follows that of the latest iOS system apps.</p><ul><li><strong>Storyboards and Xibs</strong>: NineAnimator defines most of the UIs with storyboards. We also use auto-layout extensively for adaptive layouts and device variants.</li><li><strong>Theme</strong>: Although iOS 13 introduced the system-wide dark mode, to enable backward compatibility with older systems, we still employ our own theming system for light and dark appearances. Each UI component is manually added by <code>Theme.provision()</code> (or, for subclasses of <code>UIView</code>, <code>.makeThemable()</code>). Subclasses of <code>UIView</code> can either implicitly or explicitly support the theming system. By default, the theming system will configure the views according to types. By conforming to the <code>Themable</code> protocol, you&#39;re explicitly stating support for the theme system and waiving the default behaviors.</li></ul><p><strong>Controllers</strong>: Controllers of NineAnimator manages the internal flow and logics.</p><ul><li><strong>View Controllers</strong>: View controllers instantiate and manage views. In most cases, there will be a convenient method for instantiating view controllers. Optionally, view controllers are also linked by storyboard references. The following is a list of common view controllers in NineAnimator. <ul><li><strong>AnimeViewController</strong>: The <code>AnimeViewController</code> class fetches and presents the correspond <code>Anime</code> object of an <code>AnimeLink</code>. Create the <code>AnimeViewController</code> using storyboard, then use the <code>setPresenting()</code> method to configure.</li><li><strong>NativePlayerController</strong>: The <code>NativePlayerController</code> class manages local playbacks of the retrieved <code>PlaybackMedia</code> instances. You don&#39;t instantiate <code>NativePlayerController</code> directly. Instead, you use the <code>NativePlayerController.default</code> singleton to retrieve the shared instance and call the <code>play()</code> method to start playback.</li><li><strong>CastController</strong>: The <code>CastController</code> manages external playbacks such as Google Cast. Use <code>CastController.default</code> to retrieve the singleton. Use the <code>presentPlaybackController()</code> to present the casting interface. Use the <code>var isReady: Bool</code> getter to check if a device has been selected and is ready for playback.</li></ul></li><li><strong>UserNotificationManager</strong>: The <code>UserNotificationManager</code> manages and update anime subscriptions. Use the <code>UserNotificationManager.default</code> singleton to retrieve the shared manager.</li><li><strong>OfflineContentManager</strong>: The <code>OfflineContentManager</code> hosts NineAnimator&#39;s download system. Use the <code>OfflineContentManager.shared</code> singleton to access the shared manager.</li></ul><h4 id="asynchronous" tabindex="-1"><a class="header-anchor" href="#asynchronous" aria-hidden="true">#</a> Asynchronous</h4><p>Most operations in NineAnimator are performed asynchronously (optionally on a different thread). This ensures that any time consuming or intensive tasks won&#39;t block the main thread.</p>',6),Je=s("At the center of NineAnimator's asynchronous framework is the "),Ke={href:"https://github.com/SuperMarcus/NineAnimatorCommon/blob/master/Sources/NineAnimatorCommon/Utilities/Asynchronous/Promise.swift",target:"_blank",rel:"noopener noreferrer"},Qe=e("code",null,"NineAnimatorPromise",-1),Ze=s(" class"),$e=s(". This class borrows the idea of promise and bridges the legacy callback mechanisms."),es=t(`<blockquote><p>Note: As a safety measure, be sure to maintain a reference to the promise instance for the duration of the task. Losing reference to an unresolved promise will result in the executing task being cancelled. Inside the promise, all references to the blocks or tasks will be removed as soon as the promise task returns.</p></blockquote><div class="language-swift ext-swift line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">let</span><span style="color:#D4D4D4;"> promise = NineAnimatorPromise.</span><span style="color:#9CDCFE;">firstly</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">    () -&gt; </span><span style="color:#4EC9B0;">Int</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">in</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">var</span><span style="color:#D4D4D4;"> result: </span><span style="color:#4EC9B0;">Int</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// Perform some operations...</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> result</span></span>
<span class="line"><span style="color:#D4D4D4;">} .</span><span style="color:#9CDCFE;">then</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">    previousResult -&gt; </span><span style="color:#4EC9B0;">Int</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">in</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">var</span><span style="color:#D4D4D4;"> result: </span><span style="color:#4EC9B0;">Int</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// Some additional operations...</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> result</span></span>
<span class="line"><span style="color:#D4D4D4;">} .</span><span style="color:#9CDCFE;">thenPromise</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">    previousResult -&gt; NineAnimatorPromise&lt;</span><span style="color:#4EC9B0;">Int</span><span style="color:#D4D4D4;">&gt; </span><span style="color:#C586C0;">in</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// Return a promise</span></span>
<span class="line"><span style="color:#D4D4D4;">    .</span><span style="color:#9CDCFE;">firstly</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">var</span><span style="color:#D4D4D4;"> result: </span><span style="color:#4EC9B0;">Int</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">// Perform some more operations...</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> result</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">} .</span><span style="color:#9CDCFE;">defer</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">    thisPromise </span><span style="color:#C586C0;">in</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// This block is executed whenever the promises to this point finish</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// executing, regardless of success or failure.</span></span>
<span class="line"><span style="color:#D4D4D4;">} .</span><span style="color:#9CDCFE;">error</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">    error </span><span style="color:#C586C0;">in</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// Called when the promise is rejected with an error</span></span>
<span class="line"><span style="color:#D4D4D4;">} .</span><span style="color:#9CDCFE;">finally</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">    finalResult </span><span style="color:#C586C0;">in</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// Called when the promise is resolved (successfully)</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// All previous promises are not executed until the \`finally\` block</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// is added.</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="styleguides" tabindex="-1"><a class="header-anchor" href="#styleguides" aria-hidden="true">#</a> Styleguides</h3><h4 id="git-commits" tabindex="-1"><a class="header-anchor" href="#git-commits" aria-hidden="true">#</a> Git Commits</h4><p>In general, use descriptive languages for commit messages. Explain what you add, changed, or deleted (&quot;Fix a problem that causes the app to crash in the Library scene&quot; not &quot;fix a problem&quot;). Reference any issue if the commit is related to one.</p><p>Before committing, make sure the compiler doesn&#39;t complain and <code>swiftlint</code> doesn&#39;t give out warnings.</p><p>Avoid trivial (&quot;Oops!&quot;) commits. Whenever possible, amend your existing commits before pushing or submitting a pull request.</p><p>Do as much as related in a single commit. For example, if you&#39;re renaming a list of files, don&#39;t commit for each rename operation. Instead, commit once for all name changes.</p><h4 id="swift-styleguide" tabindex="-1"><a class="header-anchor" href="#swift-styleguide" aria-hidden="true">#</a> Swift Styleguide</h4><p>A few points to keep in mind:</p><ul><li>Use implicit returns for single-line functions and closures.</li><li>Avoid implicit unwrapping properties and variables (<code>var data: Data! { get }</code>).</li><li>Prefer shorter class names (<code>LibrarySceneController</code> not <code>LibraryTabSceneCollectionViewController</code>).</li><li>Prefer extensions over single files. Split large files into multiple smaller files with <code>+</code> extensions (ex. <code>User.swift</code>, <code>User+Preferences.swift</code>, <code>User+History.swift</code>).</li></ul><p>We use <code>swiftlint</code> to ensure the tidiness of our code. Before submitting your code, run <code>swiftlint</code> to check for potential styling violations.</p><h3 id="contributing-assets" tabindex="-1"><a class="header-anchor" href="#contributing-assets" aria-hidden="true">#</a> Contributing Assets</h3>`,13),ss=s("Please use our "),ns={href:"https://discord.gg/dzTVzeW",target:"_blank",rel:"noopener noreferrer"},os=s("Discord server"),ts=s(" for suggestions related to UI designs and visual experiences."),as=e("ul",null,[e("li",null,[e("strong",null,"App Icon Submissions"),s(": please submit your design to the #app-icon-suggestions channel. Community-contributed app icons should be rendered with a resolution of 180x180 or higher.")]),e("li",null,[e("strong",null,"Visuals & Designs"),s(": please send your design or suggestions to the #suggestions channel.")])],-1);function rs(is,ls){const n=a("ExternalLinkIcon");return r(),i(l,null,[d,h,e("p",null,[u,e("a",m,[_,o(n)]),f,e("a",g,[y,o(n)]),b]),D,e("p",null,[w,e("a",C,[v,o(n)]),k]),A,e("p",null,[N,e("a",S,[x,o(n)]),M]),I,e("ul",null,[e("li",null,[T,P,e("a",U,[V,o(n)]),E,q,B]),e("li",null,[L,F,e("a",R,[W,o(n)]),z,O,j]),e("li",null,[H,G,e("a",Y,[X,o(n)]),J,e("a",K,[Q,o(n)]),Z]),$,ee]),e("p",null,[se,e("a",ne,[oe,o(n)]),te]),ae,re,ie,e("p",null,[le,ce,e("a",pe,[de,o(n)]),he]),e("ul",null,[e("li",null,[ue,me,_e,fe,e("a",ge,[ye,o(n)]),be,De,we,Ce,ve]),e("li",null,[ke,Ae,e("a",Ne,[Se,o(n)]),xe,Me,Ie,Te,Pe]),e("li",null,[Ue,Ve,e("a",Ee,[qe,o(n)]),Be,Le,Fe,Re,We,ze,Oe,je,He,Ge,Ye])]),Xe,e("p",null,[Je,e("a",Ke,[Qe,Ze,o(n)]),$e]),es,e("p",null,[ss,e("a",ns,[os,o(n)]),ts]),as],64)}var ds=c(p,[["render",rs]]);export{ds as default};
